<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="HandheldFriendly" content="true">
  <link rel="apple-touch-icon" href="img/apple-icon.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-icon.png" />
  <link rel="icon" href="img/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <title>지우</title>
  <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
</head>

<body ontouchstart="">
  <div class="dim"></div>
  <nav>
    <span class="mark"></span>
    <ul>
      <li><a href="index.html">랜덤메뉴</a></li>
    </ul>
  </nav>

    <h1>랜덤메뉴 <button type="button" class="clear"><i class="fas fa-sync-alt"></i></button></h1>
    <div class="input-wrap">
      <input type="text" placeholder="메뉴를 적으셈" class="input">
      <button type="button" class="add-menu"><i class="fas fa-plus"></i></button>
    </div>
    <div class="menu">
        <ul>
        </ul>
    </div>
    <div class="result-wrap">
      <button type="button" class="result">돌려돌려<br/>메뉴판</button>
    </div>
    
  <script>
    document.documentElement.addEventListener('touchstart', function (event) {
      if (event.touches.length > 1) {
        event.preventDefault();
      }
    }, false);
    $(function () {
      var menu = []
      var overlap = false;

      $('.mark, .dim').click(function(){
        if($('nav').is('.active')){
          $('nav, .dim').removeClass('active');
        } else {
          $('nav, .dim').addClass('active');
        }
      });
      
      function pathMenu(){
        var windowPath = window.location.pathname.split("/").pop()
        var pathMenu = []
        $('nav li').removeClass()

        for(i=0; i<$('nav li').length; i++){
          var pathHref = $('nav li').eq(i).find('a').attr('href')
          if(windowPath == pathHref){
            $('nav li').eq(i).addClass('active')
          }
        }
      } pathMenu()

      function addMenu(){
          var val = $('input').val();
          var overlap = false;

          if(val == ''){
            overflap = true;
          } else {
            for(i=0; i<menu.length; i++){
              if( val == menu[i] ){
                  alert('같은 메뉴자나 바보야') 
                  return true
              }
            }
  
            if( overlap !== true ){
                menu.push(val);
                $('.menu ul').append('<li>' + val + '<i class="del fas fa-minus-circle"></i>' + '</li>');
                $('input').val('');
            }
          }
          console.log(overlap)
          console.log(menu)
      }

      function result(){
        var ranNumb = Math.floor(Math.random() * menu.length)
            console.log(ranNumb)
        var eatThis = []

        eatThis.push(menu[ranNumb])
        // menu.splice(ranNumb, 1) 당첨된 메뉴 제거
        $('.menu ul li').removeClass('active')
        $('.menu ul li').eq(ranNumb).addClass('active')
        // alert(eatThis)
      }

      function del(){
        console.log('check')
      }

      $('.add-menu').click(function(){
          addMenu()
      })
      $('.clear').click(function(){
          menu = []
          $('.menu ul li').remove()
      })
      $('.menu ul').on('click', '.del', function(){
        var idx = $(this).parent().index()
        menu.splice(idx, 1);
        $(this).parent().addClass('remove')
        setTimeout(() => {
          $(this).parent().remove()
          }, 200);
        console.log(menu)
      })
      $('input').keydown(function (key) {
          if (key.keyCode == 13) {
              addMenu()
          }
      })
      $('.result').click(function(){
          result()
      })
    })
  </script>
</body>

</html>